box:
  id: alpine
  cmd: /bin/sh

build:
  steps:
    - script:
      name: setup packages
      code: |
        apk add --update build-base boost boost-dev clang clang-dev cmake ninja yaml yaml-dev

    - script:
      name: build
      code: |
        mkdir -p build
        cd build
        cmake .. -G Ninja -DCMAKE_BUILD_TYPE=Debug -DCMAKE_CXX_COMPILER=$CXX -DCMAKE_CXX_STANDARD=$CXX_STANDARD
        ninja -v

    - script:
      name: test
      code: |
        cd build
        ctest --output-on-failure
