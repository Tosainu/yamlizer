box: fedora

build:
  steps:
    - script:
      name: setup packages
      code: |
        dnf upgrade -y
        dnf install -y boost-devel clang cmake libyaml-devel ninja-build
        dnf clean all

    - script:
      name: build
      code: |
        mkdir -p build
        cd build
        cmake .. -G Ninja -DCMAKE_BUILD_TYPE=Debug -DCMAKE_CXX_COMPILER=$CXX -DCMAKE_CXX_STANDARD=$CXX_STANDARD
        ninja -v

    - script:
      name: test
      code: |
        cd build
        ctest --output-on-failure
